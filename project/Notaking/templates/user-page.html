{% extends "layout.html" %}


{% block main %}


    <div class="container-fluid mt-3" align="center">

        <nav class="navbar navbar-expand-lg bg-color-user" style="height: 60px;">

            <h1 class="text-warning">Notaking</h1>

            <div class="collapse navbar-collapse justify-content-end">

              <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link text-dark btn btn-outline-warning button-animation" href="/home">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link text-dark btn btn-outline-warning button-animation" href="/my_notes">My Notes</a>
                </li>
                <li class="nav-item">
                  <button type="button" class="nav-link btn btn-outline-primary button-animation" onclick="log_out()">Log Out</a>
                </li>
                <li class="nav-item">
                    <button type="button" class="nav-link text-dark btn btn-outline-light button-animation" onclick="show_form(true, 'password_form', 'delete_account_form')">Change Password</a>
                </li>
                <li class="nav-item">
                    <button type="button" class="nav-link btn btn-outline-danger button-animation" onclick="show_form(true, 'delete_account_form', 'password_form')">Delete Account</a>
                </li>
              </ul>

            </div>

        </nav>


        <div class="box-container" style="margin-top: 50px; max-width: 1000px;">

            <img src="../static/images/profile.png" alt="profile" style="width: 80px;">

            <h1 class="text-uppercase text-warning" style="font-weight: bolder;">{{ user["user_name"] }}</h1>

            <br>

            <table class="table table-light bg-transparent table-hover table-bordered table-striped" style="font-weight: bold;" align="center">

                <thead>

                    <tr class="text-center text-info">
                        <td>User Name</td>
                        <td>Email</td>
                        <td>Date Of Join</td>
                        <td>Notes</td>
                        <td>Words</td>
                        <td>Letters</td>
                        <td>Deleted Notes</td>
                        <td>Edited Notes</td>
                    </tr>

                </thead>

                <tbody>

                    <tr class="text-primary">
                        <td>{{ user["user_name"] }}</td>
                        <td>{{ user["user_email"] }}</td>
                        <td>{{ user["join_date"] }}</td>
                        <td>{{ archive["notes_count"] }}</td>
                        <td>{{ archive["words_count"] }}</td>
                        <td>{{ archive["letters_count"] }}</td>
                        <td>{{ archive["deleted_notes"] }}</td>
                        <td>{{ archive["edited_notes"] }}</td>
                    </tr>

                </tbody>

            </table>

        </div>


        <div class="box-container" id="password_form" style="max-width: 450px; margin-top: 25px; padding: 10px; display: none;">

            <h3 class="text-info">Change Your Password</h3>

            <div class="container m-3">

                <form action="" method="post">

                    <input type="password" class="form-control w-75 bg-transparent mx-auto text-center text-secondary h3" name="current_password" placeholder="Current Password" required>

                    <input type="password" class="form-control w-75 bg-transparent mx-auto text-center text-secondary h3" name="new_password" minlength="9" placeholder="New Password" required>

                    <input type="password" class="form-control w-75 bg-transparent mx-auto text-center text-secondary h3" name="confirm_password" minlength="9" placeholder="Confirm Password" required>

                    <button type="submit" class="btn btn-outline-info text-dark button-animation" name="submit_button" value="change_password">Change</button>

                    <button type="button" class="btn btn-outline-danger button-animation" onclick="show_form(false)">Cancel</button>

                </form>

            </div>

        </div>


        <div class="box-container" id="delete_account_form" style="max-width: 500px; margin-top: 30px; padding: 10px; display: none;">

            <h3 class="text-danger">Delete Your Account</h3>

            <div class="container m-3">

                <form action="" method="post">

                    <input type="password" class="form-control w-75 bg-transparent mx-auto text-center text-secondary h3" name="password" placeholder="Enter Your Password" minlength="9" required>

                    <input type="password" class="form-control w-75 bg-transparent mx-auto text-center text-secondary h3" name="confirm_to_delete" placeholder="Confirm Password" minlength="9" required>

                    <button type="submit" class="btn btn-outline-danger mt-1 button-animation" name="submit_button" value="deactivate_account">Deactivate</button>

                    <button type="button" class="btn btn-outline-light text-dark mt-1 button-animation" onclick="show_form(false)">Cancel</button>

                </form>

            </div>

        </div>


    </div>

    {% if error %}

        <script>
            function showAlert() {
                alert('{{ msg|tojson }}');
            }
            showAlert();
        </script>

    {% endif %}


{% endblock %}